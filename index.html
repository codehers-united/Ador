<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ğŸ‚ Happy Birthday, Bro!</title>
  <style>
    :root{
      --bg:#0b0b14; --card:#14142b; --txt:#f3f3ff; --muted:#b7b7d6;
      --hot:#ff4fd8; --lime:#7CFF6B; --cyan:#49eaff; --gold:#ffd54a;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--txt); background:radial-gradient(circle at 20% 10%, #2b1b5a, transparent 40%),
      radial-gradient(circle at 90% 20%, #1b5a4f, transparent 40%), var(--bg);
      overflow-x:hidden;
    }
    header{
      position:sticky; top:0; z-index:50;
      backdrop-filter: blur(10px);
      background:rgba(10,10,20,.55);
      border-bottom:1px solid rgba(255,255,255,.08);
      padding:12px 16px;
      display:flex; align-items:center; justify-content:space-between; gap:12px;
    }
    .pill{padding:8px 12px; border-radius:999px; background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.12);}
    .btn{
      cursor:pointer; border:none; color:var(--txt);
      background:linear-gradient(135deg, var(--hot), #7b61ff);
      padding:10px 14px; border-radius:12px; font-weight:700;
      box-shadow:0 10px 30px rgba(255,79,216,.25);
      transition:transform .1s ease, filter .2s ease;
      user-select:none;
    }
    .btn:hover{filter:brightness(1.07)}
    .btn:active{transform:scale(.98)}
    .btn.secondary{
      background:rgba(255,255,255,.08);
      box-shadow:none; border:1px solid rgba(255,255,255,.15);
      font-weight:600;
    }
    .wrap{max-width:1050px; margin:0 auto; padding:18px 16px 80px;}
    .hero{
      display:grid; gap:14px; align-items:center;
      grid-template-columns: 1.2fr .8fr;
      margin-top:14px;
    }
    @media (max-width:900px){ .hero{grid-template-columns:1fr} }
    .card{
      background:rgba(20,20,43,.75);
      border:1px solid rgba(255,255,255,.10);
      border-radius:18px;
      padding:16px;
      box-shadow:0 18px 60px rgba(0,0,0,.35);
    }
    h1{margin:0 0 6px; font-size:clamp(28px, 4.2vw, 46px); letter-spacing:-.03em;}
    .glow{background: linear-gradient(90deg, var(--gold), var(--cyan), var(--hot)); -webkit-background-clip:text; background-clip:text; color:transparent;}
    .sub{color:var(--muted); line-height:1.55}
    .grid{display:grid; gap:14px; grid-template-columns:repeat(12,1fr); margin-top:14px;}
    .col6{grid-column:span 6}
    .col4{grid-column:span 4}
    .col12{grid-column:span 12}
    @media (max-width:900px){ .col6,.col4{grid-column:span 12} }

    /* goofy floating emojis */
    .floaty{
      position:fixed; inset:0; pointer-events:none; z-index:0;
      overflow:hidden;
    }
    .emoji{
      position:absolute; font-size:32px; opacity:.85;
      animation: drift linear infinite;
      filter: drop-shadow(0 10px 10px rgba(0,0,0,.35));
    }
    @keyframes drift{
      from{ transform: translateY(110vh) rotate(0deg); }
      to{ transform: translateY(-20vh) rotate(360deg); }
    }

    /* wiggle */
    .wiggle{display:inline-block; animation: wiggle .9s ease-in-out infinite;}
    @keyframes wiggle{
      0%,100%{transform:rotate(-2deg)}
      50%{transform:rotate(2deg)}
    }

    /* modal */
    .modal{
      position:fixed; inset:0; background:rgba(0,0,0,.55);
      display:none; place-items:center; padding:16px; z-index:200;
    }
    .modal.open{display:grid}
    .modalBox{max-width:900px; width:min(900px, 100%); border-radius:18px; overflow:hidden;}
    .modalHeader{display:flex; justify-content:space-between; align-items:center; padding:10px 12px; background:rgba(10,10,20,.9);}
    .close{cursor:pointer; font-weight:900; opacity:.8}
    .close:hover{opacity:1}
    iframe, video{width:100%; aspect-ratio:16/9; border:0; display:block; background:#000}

    /* game */
    .gameArea{
      height:280px; border-radius:16px; position:relative; overflow:hidden;
      background: radial-gradient(circle at 20% 20%, rgba(124,255,107,.15), transparent 40%),
                  radial-gradient(circle at 80% 30%, rgba(73,234,255,.15), transparent 40%),
                  rgba(255,255,255,.04);
      border:1px solid rgba(255,255,255,.12);
    }
    .player{
      position:absolute; bottom:10px; left:50%;
      width:56px; height:56px; transform:translateX(-50%);
      display:grid; place-items:center; font-size:36px;
      transition: left .05s linear;
    }
    .drop{
      position:absolute; top:-40px; width:42px; height:42px;
      display:grid; place-items:center; font-size:32px;
    }
    .hud{display:flex; gap:10px; flex-wrap:wrap; margin-top:10px; align-items:center;}
    .tiny{font-size:13px; color:var(--muted)}
    .bar{
      flex:1; min-width:220px;
      height:10px; border-radius:999px;
      background:rgba(255,255,255,.10); overflow:hidden;
      border:1px solid rgba(255,255,255,.12);
    }
    .bar > div{height:100%; width:0%; background:linear-gradient(90deg, var(--lime), var(--cyan), var(--hot));}
    .choiceRow{display:flex; gap:10px; flex-wrap:wrap; margin-top:10px;}
    .chip{
      cursor:pointer;
      padding:10px 12px; border-radius:14px;
      background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
      transition:transform .12s ease, background .2s ease;
      user-select:none;
    }
    .chip:hover{transform:translateY(-2px); background:rgba(255,255,255,.10)}
    .result{margin-top:10px; font-weight:700}
    .gallery{
      display:grid; gap:10px;
      grid-template-columns: repeat(3, 1fr);
    }
    @media (max-width:900px){ .gallery{grid-template-columns:repeat(2,1fr)} }
    .ph{
      aspect-ratio:1/1; border-radius:14px;
      background:rgba(255,255,255,.06);
      border:1px dashed rgba(255,255,255,.18);
      display:grid; place-items:center; color:var(--muted); text-align:center; padding:10px;
    }
    footer{opacity:.75; text-align:center; padding:40px 16px 60px; color:var(--muted)}
    #message {
        opacity: 0;
        transition: opacity 2s ease;
        }
        /* --- PHOTO WALL (alive, single section) --- */
.photo-wall{
  margin-top:14px;
  position:relative;
  min-height:420px;
  border-radius:18px;
  padding:18px;
  overflow:hidden;

  background:
    radial-gradient(circle at 15% 20%, rgba(255,79,216,.12), transparent 42%),
    radial-gradient(circle at 85% 25%, rgba(73,234,255,.12), transparent 45%),
    radial-gradient(circle at 40% 90%, rgba(124,255,107,.10), transparent 45%),
    rgba(255,255,255,.03);

  border:1px solid rgba(255,255,255,.10);
}

/* subtle moving shine */
.photo-wall::before{
  content:"";
  position:absolute; inset:-30%;
  background: linear-gradient(120deg, transparent 35%, rgba(255,255,255,.10) 50%, transparent 65%);
  transform: rotate(8deg);
  animation: wallShine 7s linear infinite;
  pointer-events:none;
}
@keyframes wallShine{
  from{ transform: translateX(-30%) rotate(8deg); }
  to  { transform: translateX(30%) rotate(8deg); }
}

/* Polaroid cards */
.polaroid{
  position:absolute;
  width: min(240px, 38vw);
  background: rgba(255,255,255,.92);
  color:#12121b;
  border-radius:14px;
  padding:10px 10px 12px;
  box-shadow: 0 18px 50px rgba(0,0,0,.45);
  border: 1px solid rgba(0,0,0,.08);
  cursor:pointer;
  user-select:none;

  transform: translate3d(0,0,0) rotate(var(--rot, -2deg));
  transition: transform .25s ease, box-shadow .25s ease, filter .25s ease;
  will-change: transform;
  animation: popIn .45s ease both;
}
@keyframes popIn{
  from{ opacity:0; transform: translateY(18px) scale(.96) rotate(var(--rot, -2deg)); }
  to{ opacity:1; transform: translateY(0) scale(1) rotate(var(--rot, -2deg)); }
}

.polaroid img{
  width:100%;
  aspect-ratio: 4 / 3;
  object-fit: cover;
  border-radius:10px;
  display:block;
  filter: contrast(1.04) saturate(1.05);
}

.polaroid figcaption{
  font-weight:800;
  font-size: 12.5px;
  margin-top:8px;
  line-height:1.25;
  opacity:.92;
}

/* Hover = alive */
.polaroid:hover{
  z-index:20;
  box-shadow: 0 28px 70px rgba(0,0,0,.55);
  filter: brightness(1.02);
  transform: translateY(-10px) rotate(0deg) scale(1.05);
}

/* Floating animation (toggleable) */
.float-on .polaroid{
  animation: floatyPolaroid 4.6s ease-in-out infinite, popIn .45s ease both;
  animation-delay: var(--delay, 0s), 0s;
}
@keyframes floatyPolaroid{
  0%,100%{ transform: translateY(0) rotate(var(--rot, -2deg)); }
  50%    { transform: translateY(-10px) rotate(calc(var(--rot, -2deg) * -1)); }
}

/* --- LIGHTBOX --- */
.lightbox{
  position:fixed; inset:0;
  background: rgba(0,0,0,.75);
  display:none;
  place-items:center;
  z-index:9999;
  padding:16px;
}
.lightbox.open{display:grid;}

.lightbox-inner{
  position:relative;
  width:min(980px, 100%);
  border-radius:18px;
  overflow:hidden;
  background: rgba(15,15,25,.95);
  border:1px solid rgba(255,255,255,.14);
  box-shadow: 0 30px 120px rgba(0,0,0,.7);
}
.lightbox-inner img{
  width:100%;
  max-height: 78vh;
  object-fit: contain;
  display:block;
  background:#000;
}
.lb-caption{
  padding:10px 12px;
  color: rgba(255,255,255,.9);
  font-weight:700;
}
.lb-btn{
  position:absolute;
  top:10px;
  border:none;
  cursor:pointer;
  color:#fff;
  background: rgba(255,255,255,.12);
  border:1px solid rgba(255,255,255,.18);
  border-radius:12px;
  padding:8px 10px;
  font-weight:900;
  backdrop-filter: blur(10px);
}
.lb-btn:hover{background: rgba(255,255,255,.18);}
.lb-close{right:10px;}
.lb-prev{left:10px; top:50%; transform:translateY(-50%); font-size:22px; padding:10px 14px;}
.lb-next{right:10px; top:50%; transform:translateY(-50%); font-size:22px; padding:10px 14px;}
  </style>
</head>

<body>
  <div class="floaty" id="floaty"></div>

  <header>
    <div class="pill">ğŸ <b>Operation: Birthday Surprise</b></div>
    <div style="display:flex; gap:10px; flex-wrap:wrap;">
      <button class="btn secondary" id="musicBtn">ğŸ”Š Music: Off</button>
      <button class="btn" id="confettiBtn">ğŸ‰ CONFETTI BLAST</button>
    </div>
  </header>

  <div class="wrap" style="position:relative; z-index:1;">
    <section class="hero">
      <div class="card">
        <h1>Happy Birthday, <span class="glow wiggle" id="broName">BRO</span>! ğŸ‚</h1>
        <p class="sub">
          Welcome to the official website of <b>fun</b>, <b>chaos</b>, and <b>mild embarrassment</b>.
          You have been chosen as todayâ€™s <span class="glow">legendary birthday human</span>.
        </p>
        <div class="choiceRow">
          <button class="btn" id="roastBtn">ğŸ˜‚ Open the Roast Video</button>
          <button class="btn secondary" id="secretBtn">ğŸ¤« Press for a secret</button>
        </div>
        <p class="tiny" id="secretText" style="display:none; margin-top:10px;">
          Secret unlocked: You owe the website creator 1 cake slice ğŸ° (non-negotiable).
        </p>
      </div>

      <div class="card">
        <h2 style="margin:0 0 6px;">ğŸ§ Birthday Soundboard</h2>
        <p class="tiny">Click a button. Get instant chaos.</p>
        <div class="choiceRow">
          <button class="btn secondary" data-sfx="airhorn">ğŸ“£ Airhorn</button>
          <button class="btn secondary" data-sfx="wow">ğŸ˜² WOW</button>
          <button class="btn secondary" data-sfx="boing">ğŸŒ€ Boing</button>
          <button class="btn secondary" data-sfx="tada">ğŸº Ta-da</button>
        </div>
        <p class="tiny" style="margin-top:10px;">
          Tip: replace sounds in the <code>assets/</code> folder later.
        </p>
      </div>
    </section>

    <section class="grid">
      <div class="card col6">
        <h2 style="margin:0 0 8px;">ğŸ§  Which Brother Are You Today?</h2>
        <p class="tiny">Pick one. The website will judge you.</p>
        <div class="choiceRow" id="choices">
          <div class="chip" data-type="chaos">ğŸ”¥ Chaos Gremlin</div>
          <div class="chip" data-type="sleepy">ğŸ˜´ Professional Napper</div>
          <div class="chip" data-type="food">ğŸ• Snack Commander</div>
          <div class="chip" data-type="hero">ğŸ¦¸ Accidental Hero</div>
        </div>
        <div class="result" id="choiceResult">Choose wiselyâ€¦</div>
      </div>

      <div class="card col6">
        <h2 style="margin:0 0 8px;">ğŸ® Mini Game: Catch the Cake</h2>
        <p class="tiny">Move with <b>â† â†’</b> (or drag on mobile). Catch ğŸ°, avoid ğŸ’£. 30 seconds.</p>

        <div class="gameArea" id="game">
          <div class="player" id="player">ğŸ§º</div>
        </div>

        <div class="hud">
          <div class="pill">Score: <b id="score">0</b></div>
          <div class="pill">Time: <b id="time">30</b>s</div>
          <button class="btn secondary" id="startGame">Start</button>
          <div class="bar" aria-label="time bar"><div id="timeBar"></div></div>
        </div>
        <div class="tiny" id="gameMsg" style="margin-top:10px;"></div>
      </div>

      <div class="card col12" id="photoWallSection">
  <div style="display:flex; justify-content:space-between; align-items:center; gap:12px; flex-wrap:wrap;">
    <div>
      <h2 style="margin:0 0 6px;">ğŸ“¸ Photo Wall of Legendary Moments</h2>
      <p class="tiny" style="margin:0;">Hover the photos. Click to view big. Shuffle to remix the chaos.</p>
    </div>
    <div style="display:flex; gap:10px; flex-wrap:wrap;">
      <button class="btn secondary" id="shufflePhotos">ğŸ² Shuffle</button>
      <button class="btn secondary" id="toggleFloat">ğŸª© Toggle Float</button>
    </div>
  </div>

  <div class="photo-wall" id="photoWall">
    <!-- Replace filenames with your real ones -->
    <figure class="polaroid" data-caption="Broâ€™s first villain arc ğŸ˜ˆ">
      <img src="assets/photos/photo1.jpg" alt="Photo 1">
      <figcaption>Broâ€™s first villain arc ğŸ˜ˆ</figcaption>
    </figure>

    <figure class="polaroid" data-caption="This hairstyle was a decision ğŸ’€">
      <img src="assets/photos/photo2.jpg" alt="Photo 2">
      <figcaption>This hairstyle was a decision ğŸ’€</figcaption>
    </figure>

    <figure class="polaroid" data-caption="Main character energy âœ¨">
      <img src="assets/photos/photo3.jpg" alt="Photo 3">
      <figcaption>Main character energy âœ¨</figcaption>
    </figure>

    <figure class="polaroid" data-caption="Certified chaos moment ğŸ”¥">
      <img src="assets/photos/photo4.jpg" alt="Photo 4">
      <figcaption>Certified chaos moment ğŸ”¥</figcaption>
    </figure>

    <figure class="polaroid" data-caption="Proof we were innocent once ğŸ¥²">
      <img src="assets/photos/photo5.jpg" alt="Photo 5">
      <figcaption>Proof we were innocent once ğŸ¥²</figcaption>
    </figure>

    <figure class="polaroid" data-caption="Bro when food appears ğŸ•">
      <img src="assets/photos/photo6.jpg" alt="Photo 6">
      <figcaption>Bro when food appears ğŸ•</figcaption>
    </figure>
  </div>
</div>

<!-- Lightbox -->
<div class="lightbox" id="lightbox">
  <div class="lightbox-inner">
    <button class="lb-btn lb-close" id="lbClose">âœ–</button>
    <button class="lb-btn lb-prev" id="lbPrev">â€¹</button>
    <img id="lbImg" alt="Expanded photo">
    <button class="lb-btn lb-next" id="lbNext">â€º</button>
    <div class="lb-caption" id="lbCaption"></div>
  </div>
</div>

      <div class="card col4">
        <h2 style="margin:0 0 8px;">ğŸ¬ Meme Video Corner</h2>

        <button class="btn" id="playLocalVideo">â–¶ Play Local Video</button>
        
      </div>

      <div class="card col4">
        <h2 style="margin:0 0 8px;">ğŸ Final Challenge</h2>
        <p class="tiny">Choose your destiny:</p>
        <div class="choiceRow">
          <button class="btn secondary" id="btnGift">ğŸ Accept Gift</button>
          <button class="btn secondary" id="btnDance">ğŸ•º Do a Dance</button>
        </div>
        <div class="result" id="finalResult"></div>
      </div>
      <button class="btn" id="unlockSurprise">ğŸ”’ Unlock Final Surprise</button>

      <div class="card col12">
        <h2 style="margin:0 0 8px;">ğŸ’Œ The Message</h2>
        <p class="sub" id="message">
        Dear <b>MY FAVORITE HUMAN</b>,

        Today is not just your birthday.  
        Itâ€™s the anniversary of the day the world became more chaotic, louderâ€¦ and honestly, way more fun.

        We grew up fighting over small things,  
        laughing over nothing,  
        and creating memories that will stay forever.

        You annoy me sometimes.  
        You act crazy sometimes.  
        But you are also one of the strongest, kindest, and realest people I know.

        Iâ€™m proud of the person you're becoming.  
        Iâ€™m grateful you're my brother.  

        No matter how old we get,  
        Iâ€™ll always be there â€”  
        to support you, roast you, protect you, and steal your food.

        Happy Birthday, legend. ğŸ‘‘  
        May this year bring you success, peace, big wins, and unlimited happiness.

        With love always,  
        â€” Your partner in crime â¤ï¸
        </p>
            </div>
            </section>
        </div>

  <footer>
    Made with ğŸ’¥ chaos & love. <br/>
    (P.S. If youâ€™re reading this, youâ€™ve already been pranked.)
  </footer>

  <!-- Roast / Video Modal -->
  <div class="modal" id="modal">
    <div class="card modalBox">
      <div class="modalHeader">
        <div>ğŸ˜‚ Roast Video</div>
        <div class="close" id="closeModal">âœ–</div>
      </div>
      <!-- OPTION 1: YouTube embed (replace VIDEO_ID) -->
      <!-- <iframe src="https://www.youtube.com/embed/VIDEO_ID?autoplay=1" allow="autoplay; encrypted-media" allowfullscreen></iframe> -->

      <!-- OPTION 2: Local mp4 -->
      <video id="roastVideo" controls>
        <source src="assets/bro.mp4" type="video/mp4" />
        Your browser doesnâ€™t support video.
      </video>
    </div>
  </div>
  <!-- Final Surprise Video Modal -->
<div class="modal" id="finalModal">
  <div class="card modalBox">
    <div class="modalHeader">
      <div>ğŸ¬ Final Surprise</div>
      <div class="close" id="closeFinalModal">âœ–</div>
    </div>

    <!-- OPTION 1: YouTube -->
    <!-- <iframe src="https://www.youtube.com/embed/YOUR_VIDEO_ID?autoplay=1" allow="autoplay; encrypted-media" allowfullscreen></iframe> -->

    <!-- OPTION 2: Local Video -->
    <video id="finalVideo" controls>
      <source src="assets/final.mp4" type="video/mp4" />
      
    </video>
  </div>
</div>

  <!-- Audio (replace files in assets/) -->
  <audio id="bgMusic" loop>
    <source src="assets/music.mp3" type="audio/mpeg" />
  </audio>
  <audio id="sfxAirhorn"><source src="assets/airhorn.mp3" type="audio/mpeg" /></audio>
  <audio id="sfxWow"><source src="assets/wow.mp3" type="audio/mpeg" /></audio>
  <audio id="sfxBoing"><source src="assets/boing.mp3" type="audio/mpeg" /></audio>
  <audio id="sfxTada"><source src="assets/tada.mp3" type="audio/mpeg" /></audio>

  <script>
    // ---------- Customize quickly ----------
    const BRO_NAME = "Boltu";   // <- change this
    const CUSTOM_MESSAGE = "";         // <- optional custom message

    // ---------- Floating emojis ----------
    const floaty = document.getElementById("floaty");
    const emojis = ["ğŸ‚","ğŸ‰","ğŸ˜‚","ğŸ•","ğŸ•º","ğŸ’¥","ğŸ§ ","ğŸ°","ğŸ˜ˆ","ğŸª©","ğŸ‘‘"];
    for(let i=0;i<22;i++){
      const s=document.createElement("div");
      s.className="emoji";
      s.textContent=emojis[Math.floor(Math.random()*emojis.length)];
      s.style.left=Math.random()*100+"vw";
      s.style.animationDuration=(8+Math.random()*10)+"s";
      s.style.animationDelay=(-Math.random()*10)+"s";
      s.style.fontSize=(24+Math.random()*26)+"px";
      floaty.appendChild(s);
    }

    // ---------- Name + message ----------
    document.getElementById("broName").textContent = BRO_NAME;
    if (CUSTOM_MESSAGE.trim()) document.getElementById("message").textContent = CUSTOM_MESSAGE.trim();

    // ---------- Confetti (tiny, no libraries) ----------
    const confettiBtn = document.getElementById("confettiBtn");
    confettiBtn.addEventListener("click", () => blastConfetti());

    function blastConfetti(){
      for(let i=0;i<120;i++){
        const p=document.createElement("div");
        p.style.position="fixed";
        p.style.left=(Math.random()*100)+"vw";
        p.style.top="-10px";
        p.style.width="10px"; p.style.height="14px";
        p.style.background=`hsl(${Math.random()*360} 90% 60%)`;
        p.style.borderRadius="3px";
        p.style.zIndex="999";
        p.style.transform=`rotate(${Math.random()*360}deg)`;
        document.body.appendChild(p);

        const endY = (80+Math.random()*40)+"vh";
        const drift = (Math.random()*40-20)+"vw";
        p.animate([
          { transform: p.style.transform, top:"-10px", opacity:1 },
          { transform:`translateX(${drift}) rotate(${Math.random()*900}deg)`, top:endY, opacity:0.2 }
        ], { duration: 1200 + Math.random()*1200, easing:"cubic-bezier(.2,.7,.2,1)" })
        .onfinish = () => p.remove();
      }
    }

    // ---------- Modal ----------
    const modal = document.getElementById("modal");
    const roastBtn = document.getElementById("roastBtn");
    const closeModal = document.getElementById("closeModal");
    const roastVideo = document.getElementById("roastVideo");
    roastBtn.onclick = () => { modal.classList.add("open"); roastVideo.play().catch(()=>{}); };
    closeModal.onclick = () => { modal.classList.remove("open"); roastVideo.pause(); };
    modal.addEventListener("click", (e)=>{ if(e.target===modal){ modal.classList.remove("open"); roastVideo.pause(); }});

    document.getElementById("playLocalVideo").onclick = () => { modal.classList.add("open"); roastVideo.play().catch(()=>{}); };

    // ---------- Secret ----------
    const secretBtn = document.getElementById("secretBtn");
    const secretText = document.getElementById("secretText");
    secretBtn.onclick = () => { secretText.style.display = secretText.style.display==="none" ? "block" : "none"; };

    // ---------- Music toggle ----------
    const bgMusic = document.getElementById("bgMusic");
    const musicBtn = document.getElementById("musicBtn");
    let musicOn = false;
    musicBtn.onclick = async () => {
      try{
        if(!musicOn){ await bgMusic.play(); musicOn=true; musicBtn.textContent="ğŸ”Š Music: On"; }
        else{ bgMusic.pause(); musicOn=false; musicBtn.textContent="ğŸ”Š Music: Off"; }
      }catch(e){
        alert("Browser blocked autoplay. Tap again after interacting ğŸ˜„");
      }
    };

    // ---------- Soundboard ----------
    const sfx = {
      airhorn: document.getElementById("sfxAirhorn"),
      wow: document.getElementById("sfxWow"),
      boing: document.getElementById("sfxBoing"),
      tada: document.getElementById("sfxTada")
    };
    document.querySelectorAll("[data-sfx]").forEach(btn=>{
      btn.addEventListener("click", ()=>{
        const k = btn.getAttribute("data-sfx");
        const a = sfx[k];
        if(!a) return;
        a.currentTime = 0;
        a.play().catch(()=>{});
        blastConfetti();
      });
    });

    // ---------- Choices ----------
    const choiceResult = document.getElementById("choiceResult");
    const texts = {
      chaos: "You chose ğŸ”¥ Chaos Gremlin. Correct. Please donâ€™t touch the kitchen.",
      sleepy: "ğŸ˜´ Professional Napper detected. Your power is unmatched.",
      food: "ğŸ• Snack Commander! You deserve a medal shaped like a burger.",
      hero: "ğŸ¦¸ Accidental Hero. Youâ€™ll save the dayâ€¦ by mistake."
    };
    document.getElementById("choices").addEventListener("click", (e)=>{
      const chip = e.target.closest(".chip");
      if(!chip) return;
      choiceResult.textContent = texts[chip.dataset.type] || "Hmm.";
      blastConfetti();
    });

    // ---------- Final buttons ----------
    const finalResult = document.getElementById("finalResult");
    document.getElementById("btnGift").onclick = () => {
      finalResult.textContent = "ğŸ Gift accepted. Terms: You must say â€˜THANK YOUâ€™ in dramatic slow motion.";
      blastConfetti();
    };
    document.getElementById("btnDance").onclick = () => {
      finalResult.textContent = "ğŸ•º Dance selected. The website is watching. Perform immediately.";
      blastConfetti();
    };

    // ---------- Mini game: Catch the Cake ----------
    const game = document.getElementById("game");
    const player = document.getElementById("player");
    const startBtn = document.getElementById("startGame");
    const scoreEl = document.getElementById("score");
    const timeEl = document.getElementById("time");
    const timeBar = document.getElementById("timeBar");
    const gameMsg = document.getElementById("gameMsg");

    let gameRunning=false, score=0, t=30, px=50, drops=[], dropTimer=null, tickTimer=null;

    function setPlayer(xPercent){
      px = Math.max(6, Math.min(94, xPercent));
      player.style.left = px + "%";
    }
    setPlayer(50);

    // Keyboard
    window.addEventListener("keydown", (e)=>{
      if(!gameRunning) return;
      if(e.key==="ArrowLeft") setPlayer(px-4);
      if(e.key==="ArrowRight") setPlayer(px+4);
    });

    // Touch / drag
    let dragging=false;
    game.addEventListener("pointerdown", ()=> dragging=true);
    window.addEventListener("pointerup", ()=> dragging=false);
    game.addEventListener("pointermove", (e)=>{
      if(!dragging || !gameRunning) return;
      const r = game.getBoundingClientRect();
      const x = (e.clientX - r.left)/r.width;
      setPlayer(x*100);
    });

    function spawnDrop(){
      const d = document.createElement("div");
      d.className="drop";
      const isBomb = Math.random() < 0.25;
      d.textContent = isBomb ? "ğŸ’£" : "ğŸ°";
      d.dataset.type = isBomb ? "bomb" : "cake";
      d.style.left = (5 + Math.random()*90) + "%";
      game.appendChild(d);
      drops.push({ el:d, y:-40, speed: 2.4 + Math.random()*2.2 });
    }

    function resetGame(){
      drops.forEach(o=>o.el.remove());
      drops=[];
      score=0; t=30;
      scoreEl.textContent=score;
      timeEl.textContent=t;
      timeBar.style.width="0%";
      gameMsg.textContent="";
    }

    function endGame(){
      gameRunning=false;
      clearInterval(dropTimer); clearInterval(tickTimer);
      const msg =
        score>=25 ? "ğŸ‘‘ LEGEND. Someone get this man a trophy (and cake)."
        : score>=15 ? "ğŸ”¥ Pretty good! You may be promoted to â€˜Senior Brotherâ€™."
        : "ğŸ˜… Hmm. Maybe stick to eating cake, not catching it.";
      gameMsg.textContent = "Game over! " + msg;
      blastConfetti();
    }

    function tick(){
      // update time
      t -= 1;
      timeEl.textContent = t;
      timeBar.style.width = ((30 - t)/30*100).toFixed(0) + "%";
      if(t<=0) endGame();
    }

    function animate(){
      if(!gameRunning) return;
      const gameRect = game.getBoundingClientRect();
      const playerRect = player.getBoundingClientRect();

      drops.forEach((o, idx)=>{
        o.y += o.speed * 3;
        o.el.style.transform = `translateY(${o.y}px)`;

        // collision check near bottom
        const r = o.el.getBoundingClientRect();
        const hit = !(r.right < playerRect.left || r.left > playerRect.right || r.bottom < playerRect.top || r.top > playerRect.bottom);

        if(hit){
          if(o.el.dataset.type==="cake"){
            score += 2;
          } else {
            score = Math.max(0, score - 5);
          }
          scoreEl.textContent = score;
          o.el.remove();
          drops.splice(idx,1);
        } else if(r.top > gameRect.bottom){
          // fell out
          o.el.remove();
          drops.splice(idx,1);
        }
      });

      requestAnimationFrame(animate);
    }

    startBtn.onclick = ()=>{
      if(gameRunning) return;
      resetGame();
      gameRunning=true;
      dropTimer = setInterval(spawnDrop, 520);
      tickTimer = setInterval(tick, 1000);
      requestAnimationFrame(animate);
    };
    // Final Surprise Unlock
const unlockBtn = document.getElementById("unlockSurprise");
const finalModal = document.getElementById("finalModal");
const closeFinalModal = document.getElementById("closeFinalModal");
const finalVideo = document.getElementById("finalVideo");

unlockBtn.onclick = () => {
  blastConfetti();
  alert("You thought that was all? ğŸ˜ One more surprise...");
  setTimeout(() => {
    finalModal.classList.add("open");
    finalVideo.play().catch(()=>{});
  }, 1000);
};

closeFinalModal.onclick = () => {
  finalModal.classList.remove("open");
  finalVideo.pause();
};

finalModal.addEventListener("click", (e)=>{
  if(e.target===finalModal){
    finalModal.classList.remove("open");
    finalVideo.pause();
  }
});
window.addEventListener("scroll", () => {
  const letter = document.getElementById("message");
  const rect = letter.getBoundingClientRect();
  if(rect.top < window.innerHeight - 100){
    letter.style.opacity = 1;
  }
});
// ---------- Photo Wall: scattered layout + lightbox ----------
const wall = document.getElementById("photoWall");
const cards = Array.from(wall.querySelectorAll(".polaroid"));

function scatter(){
  const r = wall.getBoundingClientRect();
  const pad = 16;

  cards.forEach((card, i) => {
    // random rotation & delay
    const rot = (Math.random() * 14 - 7).toFixed(2) + "deg";
    const delay = (Math.random() * 1.6).toFixed(2) + "s";
    card.style.setProperty("--rot", rot);
    card.style.setProperty("--delay", delay);

    // random position within container
    const w = Math.min(240, r.width * 0.38);
    const h = w * 0.78;

    const left = pad + Math.random() * Math.max(10, (r.width - w - pad*2));
    const top  = pad + Math.random() * Math.max(10, (r.height - h - pad*2));

    card.style.left = left + "px";
    card.style.top = top + "px";
  });
}

// Initial scatter when images load (more reliable)
window.addEventListener("load", () => {
  scatter();
  wall.classList.add("float-on"); // default ON
});

// Re-scatter on resize
window.addEventListener("resize", () => scatter());

// Shuffle button
document.getElementById("shufflePhotos").addEventListener("click", () => {
  scatter();
  blastConfetti?.(); // if your confetti function exists
});

// Toggle float
document.getElementById("toggleFloat").addEventListener("click", () => {
  wall.classList.toggle("float-on");
});

// Lightbox logic
const lightbox = document.getElementById("lightbox");
const lbImg = document.getElementById("lbImg");
const lbCaption = document.getElementById("lbCaption");
const lbClose = document.getElementById("lbClose");
const lbPrev = document.getElementById("lbPrev");
const lbNext = document.getElementById("lbNext");

let currentIndex = 0;

function openLightbox(idx){
  currentIndex = idx;
  const img = cards[idx].querySelector("img");
  const cap = cards[idx].dataset.caption || cards[idx].querySelector("figcaption")?.textContent || "";
  lbImg.src = img.src;
  lbCaption.textContent = cap;
  lightbox.classList.add("open");
}

function closeLightbox(){
  lightbox.classList.remove("open");
  lbImg.src = "";
}

function prev(){
  openLightbox((currentIndex - 1 + cards.length) % cards.length);
}
function next(){
  openLightbox((currentIndex + 1) % cards.length);
}

cards.forEach((card, idx) => card.addEventListener("click", () => openLightbox(idx)));
lbClose.addEventListener("click", closeLightbox);
lbPrev.addEventListener("click", prev);
lbNext.addEventListener("click", next);

lightbox.addEventListener("click", (e) => {
  if(e.target === lightbox) closeLightbox();
});

window.addEventListener("keydown", (e) => {
  if(!lightbox.classList.contains("open")) return;
  if(e.key === "Escape") closeLightbox();
  if(e.key === "ArrowLeft") prev();
  if(e.key === "ArrowRight") next();
});
  </script>
</body>
</html>